/*!
* FitVids 1.3
*
*
* Copyright 2017, Chris Coyier + Dave Rupert + Ghost Foundation
* This is an unofficial release, ported by John O'Nolan
* Credit to Thierry Koblentz - http://www.alistapart.com/articles/creating-intrinsic-ratios-for-video/
* Released under the MIT license
*
*/
function getHeaderLevel(e){return Number(e.nodeName.slice(-1))}function createTocMarkup(e){var t=1,i="";if(e.forEach((function(e){var r=getHeaderLevel(e);if(r>t)for(var n=!1;r>t;)n&&(i+="&nbsp;"),i+='<ul style="margin-bottom:0px"><li>',t+=1,n=!0;else if(r==t)i+="</li><li>";else if(r<t){for(;r<t;)i+="</li></ul>",t-=1;i+="<li>"}i+=`<a href="#${e.id}">${e.innerText}</a>`})),""!=i){for(;t>=2;)i+="</li></ul>",t-=1;i=`<h2 class="widget-title">Table of Contents</h2>${i}`}return i}function getTocMarkup(e){var t=e.getElementsByClassName("post-full-content")[0].querySelectorAll("h2, h3, h4, h5, h6");return t.length>=2?createTocMarkup(t):""}!function(e){"use strict";e.fn.fitVids=function(t){var i={customSelector:null,ignore:null};if(!document.getElementById("fit-vids-style")){var r=document.head||document.getElementsByTagName("head")[0],n=document.createElement("div");n.innerHTML='<p>x</p><style id="fit-vids-style">.fluid-width-video-container{flex-grow: 1;width:100%;}.fluid-width-video-wrapper{width:100%;position:relative;padding:0;}.fluid-width-video-wrapper iframe,.fluid-width-video-wrapper object,.fluid-width-video-wrapper embed {position:absolute;top:0;left:0;width:100%;height:100%;}</style>',r.appendChild(n.childNodes[1])}return t&&e.extend(i,t),this.each((function(){var t=['iframe[src*="player.vimeo.com"]','iframe[src*="youtube.com"]','iframe[src*="youtube-nocookie.com"]','iframe[src*="kickstarter.com"][src*="video.html"]',"object","embed"];i.customSelector&&t.push(i.customSelector);var r=".fitvidsignore";i.ignore&&(r=r+", "+i.ignore);var n=e(this).find(t.join(","));(n=(n=n.not("object object")).not(r)).each((function(){var t=e(this);if(!(t.parents(r).length>0||"embed"===this.tagName.toLowerCase()&&t.parent("object").length||t.parent(".fluid-width-video-wrapper").length)){t.css("height")||t.css("width")||!isNaN(t.attr("height"))&&!isNaN(t.attr("width"))||(t.attr("height",9),t.attr("width",16));var i=("object"===this.tagName.toLowerCase()||t.attr("height")&&!isNaN(parseInt(t.attr("height"),10))?parseInt(t.attr("height"),10):t.height())/(isNaN(parseInt(t.attr("width"),10))?t.width():parseInt(t.attr("width"),10));if(!t.attr("name")){var n="fitvid"+e.fn.fitVids._count;t.attr("name",n),e.fn.fitVids._count++}t.wrap('<div class="fluid-width-video-container"><div class="fluid-width-video-wrapper"></div></div>').parent(".fluid-width-video-wrapper").css("padding-top",100*i+"%"),t.removeAttr("height").removeAttr("width")}}))}))},e.fn.fitVids._count=0}(window.jQuery||window.Zepto),function(e,t){t.addEventListener("DOMContentLoaded",(function(){t.querySelectorAll(".kg-gallery-image img").forEach((function(e){var t=e.closest(".kg-gallery-image"),i=e.attributes.width.value/e.attributes.height.value;t.style.flex=i+" 1 0%"}))}))}(window,document),function(e,t){var i=t.querySelector("link[rel=next]");if(i){var r=t.querySelector(".post-feed");if(r){var n=!1,o=!1,a=e.scrollY,s=e.innerHeight,l=t.documentElement.scrollHeight;e.addEventListener("scroll",h,{passive:!0}),e.addEventListener("resize",f),u()}}function c(){if(404===this.status)return e.removeEventListener("scroll",h),void e.removeEventListener("resize",f);this.response.querySelectorAll(".post-card").forEach((function(e){r.appendChild(t.importNode(e,!0))}));var a=this.response.querySelector("link[rel=next]");a?i.href=a.href:(e.removeEventListener("scroll",h),e.removeEventListener("resize",f)),l=t.documentElement.scrollHeight,n=!1,o=!1}function d(){if(!o)if(a+s<=l-300)n=!1;else{o=!0;var t=new e.XMLHttpRequest;t.responseType="document",t.addEventListener("load",c),t.open("GET",i.href),t.send(null)}}function u(){n||e.requestAnimationFrame(d),n=!0}function h(){a=e.scrollY,u()}function f(){s=e.innerHeight,l=t.documentElement.scrollHeight,u()}}(window,document),function(e,t){e.Casper||(e.Casper={}),e.Casper.stickyNavTitle=function(i){var r=t.querySelector(i.navSelector),n=t.querySelector(i.titleSelector),o=e.scrollY,a=!1;function s(){var t=n.getBoundingClientRect().top+e.scrollY,s=n.offsetHeight+35;o>=t+s?r.classList.add(i.activeClass):r.classList.remove(i.activeClass),a=!1}e.addEventListener("scroll",(function(){o=e.scrollY,function(){a||requestAnimationFrame(s);a=!0}()}),{passive:!0}),s()}}(window,document);
//# sourceMappingURL=casper.js.map